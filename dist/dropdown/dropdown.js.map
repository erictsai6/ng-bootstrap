{"version":3,"file":"dropdown.js","sourceRoot":"","sources":["../../src/dropdown/dropdown.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  forwardRef,\n  Inject,\n  Directive,\n  Input,\n  Output,\n  EventEmitter,\n  ElementRef,\n  ContentChild,\n  OnChanges,\n  SimpleChanges\n} from '@angular/core';\nimport {NgbDropdownConfig} from './dropdown-config';\n\n/**\n */\n@Directive(\n    {selector: '[ngbDropdownMenu]', host: {'[class.dropdown-menu]': 'true', '[class.show]': 'dropdown.isOpen()'}})\nexport class NgbDropdownMenu {\n  isOpen = false;\n\n  constructor(@Inject(forwardRef(() => NgbDropdown)) public dropdown, private _elementRef: ElementRef) {}\n\n  isEventFrom($event) { return this._elementRef.nativeElement.contains($event.target); }\n}\n\n/**\n * Allows the dropdown to be toggled via click. This directive is optional.\n */\n@Directive({\n  selector: '[ngbDropdownToggle]',\n  host: {\n    'class': 'dropdown-toggle',\n    'aria-haspopup': 'true',\n    '[attr.aria-expanded]': 'dropdown.isOpen()',\n    '(click)': 'toggleOpen()'\n  }\n})\nexport class NgbDropdownToggle {\n  constructor(@Inject(forwardRef(() => NgbDropdown)) public dropdown, private _elementRef: ElementRef) {}\n\n  toggleOpen() { this.dropdown.toggle(); }\n\n  isEventFrom($event) { return this._elementRef.nativeElement.contains($event.target); }\n}\n\n/**\n * Transforms a node into a dropdown.\n */\n@Directive({\n  selector: '[ngbDropdown]',\n  exportAs: 'ngbDropdown',\n  host: {\n    '[class.dropdown]': '!up',\n    '[class.dropup]': 'up',\n    '[class.show]': 'isOpen()',\n    '(keyup.esc)': 'closeFromOutsideEsc()',\n    '(document:click)': 'closeFromClick($event)'\n  }\n})\nexport class NgbDropdown {\n  @ContentChild(NgbDropdownMenu) private _menu: NgbDropdownMenu;\n\n  @ContentChild(NgbDropdownToggle) private _toggle: NgbDropdownToggle;\n\n  /**\n   * Indicates that the dropdown should open upwards\n   */\n  @Input() up: boolean;\n\n  /**\n   * Indicates that dropdown should be closed when selecting one of dropdown items (click) or pressing ESC.\n   * When it is true (default) dropdowns are automatically closed on both outside and inside (menu) clicks.\n   * When it is false dropdowns are never automatically closed.\n   * When it is 'outside' dropdowns are automatically closed on outside clicks but not on menu clicks.\n   * When it is 'inside' dropdowns are automatically on menu clicks but not on outside clicks.\n   */\n  @Input() autoClose: boolean | 'outside' | 'inside';\n\n  /**\n   *  Defines whether or not the dropdown-menu is open initially.\n   */\n  @Input('open') _open = false;\n\n  /**\n   *  An event fired when the dropdown is opened or closed.\n   *  Event's payload equals whether dropdown is open.\n   */\n  @Output() openChange = new EventEmitter();\n\n  constructor(config: NgbDropdownConfig) {\n    this.up = config.up;\n    this.autoClose = config.autoClose;\n  }\n\n  /**\n   * Checks if the dropdown menu is open or not.\n   */\n  isOpen(): boolean { return this._open; }\n\n  /**\n   * Opens the dropdown menu of a given navbar or tabbed navigation.\n   */\n  open(): void {\n    if (!this._open) {\n      this._open = true;\n      this.openChange.emit(true);\n    }\n  }\n\n  /**\n   * Closes the dropdown menu of a given navbar or tabbed navigation.\n   */\n  close(): void {\n    if (this._open) {\n      this._open = false;\n      this.openChange.emit(false);\n    }\n  }\n\n  /**\n   * Toggles the dropdown menu of a given navbar or tabbed navigation.\n   */\n  toggle(): void {\n    if (this.isOpen()) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n\n  closeFromClick($event) {\n    if (this.autoClose && $event.button !== 2 && !this._isEventFromToggle($event)) {\n      if (this.autoClose === true) {\n        this.close();\n      } else if (this.autoClose === 'inside' && this._isEventFromMenu($event)) {\n        this.close();\n      } else if (this.autoClose === 'outside' && !this._isEventFromMenu($event)) {\n        this.close();\n      }\n    }\n  }\n\n  closeFromOutsideEsc() {\n    if (this.autoClose) {\n      this.close();\n    }\n  }\n\n  private _isEventFromToggle($event) { return this._toggle ? this._toggle.isEventFrom($event) : false; }\n\n  private _isEventFromMenu($event) { return this._menu ? this._menu.isEventFrom($event) : false; }\n}\n"]}